<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>PlannTo - Empowered Customers</title>
    <%= javascript_include_tag 'application' %>
    <%= stylesheet_link_tag 'application' %>



    <script type="text/javascript" src="/javascripts/jquery.cookie.js"></script>
     <script type="text/javascript" src="/javascripts/jslider/jquery.dependClass.js"></script>
    <script type="text/javascript" src="/javascripts/jslider/jquery.slider-min.js"></script>
    <script type="text/javascript" src="http://connect.facebook.net/en_US/all.js"></script>
    <script type="text/javascript" src="/javascripts/jquery-ui-1.8.14.custom/js/jquery.idTabs.min.js"></script>
 <script type="text/javascript">
    //  $("#ui-active-menuitem").mouseout(function() {
    //    $("#ui-active-menuitem").hide();
    //  });
$(document).ready(function(){

      $.ui.autocomplete.prototype._renderMenu = function(ul, items) {
        var self = this;
        $.each( items, function( index, item ) {
          self._renderItem( ul, item, index );
        });
        item = {value: "Search more items...", id: "0", imgsrc: ""}
        self._renderItem( ul, item, -1 );
      };

      $( "#plannToSearch" ).autocomplete({
        minLength: 3,
        format: "js",
        source: "/search/autocomplete_items",
        focus:function(e,ui) {//alert("focus");
          //return false
          // return the original title when lose focus
          // $(".autocomplete").remove();
          //  $("input").val($("#ui-active-menuitem").val());
          //  var list  ='';
          //  $.each(ui.item.children, function(i, row) {
          //    list  += "<li class='autocomplete_item' id=''>" + row.value +  "</li>"
          //   });
          //   $("#ui-active-menuitem").after("<div class='autocomplete'><ul class='autocomplete_list'>" + list  +"</ul></div>");

          // add class selecting to mark the item
          //   $("#ui-active-menuitem").addClass('selecting');
        },
        select: function( event, ui ) {
          if (ui.item.id  == 0){
            location.href = "/search/search_items?q=" + $("#plannToSearch").val();
           // return false;
          }
          else{
            location.href = "" + ui.item.url
           // return false;
          }
         // return false;
        }
      })
      .data( "autocomplete" )._renderItem = function( ul, item,index ) {
        if (index == -1){
          return $( "<li></li>" )
          .data( "item.autocomplete", item )
          .append( "<a class='searchMore'>" +item.value+ "" +  "</a>" )
          .appendTo( ul );
        }
        else{
          return $( "<li></li>" )
          .data( "item.autocomplete", item )
          .append( "<a>" + "<img width='40' height='40' src='" + item.imgsrc + "' />" + "<div style='float:right;'><span class='atext'>" +item.value+ "</span><br/><span class ='atext'>" + item.type +  "</span></div></a>" )
        // .append( "<a>" + "<img width='40' height='40' src='" + item.imgsrc + "' />" + "<span class='atext'>" +item.value+ "</span><br/><span class ='atext'>" + item.type +  "</span></a>" )
          .appendTo( ul );
        }
      };
 });
    </script>


    <script type="text/javascript">
      var i = 0;

      function CarClick(){
        var obj = document.getElementById("CarSubMenuDiv");

        if (obj.style.display == "block") {
          document.getElementById("CarSubMenuDiv").style.display = "none";
        }
        else {
          document.getElementById("CarSubMenuDiv").style.display = "block";

        }
        return true;
      };
    </script>
  </head>
  <body style="padding-bottom: 0px;" class="body">
  <div id="fb-root"></div>
  <p class="notice"><%= notice %></p>

  <p class="alert"><%= alert %></p>

    <div id="container">
      <%= render 'shared/header_links' %>


      <%= yield %>

    </div>

    <%= render 'shared/footer'  %>

    <style type="text/css">
      /* TEMPORARY FIX. TO BE REMOVED SOON*/
      .atext
      {
        font-family: "Comic Sans MS";
        font-size: 12px;
        color: #000066;
        float: right;
        text-align: right;
        position: relative;
       /* top: 5px;*/
        width:100%;
      }

      .searchMore
      {
        font-family: "Comic Sans MS";
        font-size: 12px;
        font-weight: 700;
        color: #000066;
        text-align: center;
        letter-spacing: 1px;
        /*width: 100%;*/
        position: relative;
        z-index: 3;
      }

      .ui-autocomplete-loading {
        background:url('../images/images.jpg') no-repeat right center ;
        background-color:#ffffff;}

      /*AUTOCOMPLETE CSS FOR TEST*/
      /*autocomplete*/
      /*  .auto_complete,
        .autocomplete {
          width: 300px;
          clear: left;
          float: left;
          background: #E3E9FF;
          z-index:999999;
        }
        .auto_complete ul,
        .autocomplete ul {
          border:0px ;
          /*solid #888;*/
      /* margin:0;
       padding:0;
       width:100%;
       list-style-type:none;
     }
     .auto_complete ul li,
     .autocomplete ul li{
       margin:0; padding:3px; color:black;
       cursor:hand;cursor:pointer;}
     .auto_complete ul li.selected,
     .autocomplete ul li.selected{
       background-color: #68e;
     }

     .auto_complete ul li:hover,
     .autocomplete ul li:hover {
       background-color:  #68e;
       border:0px;
     }

     .auto_complete ul strong.highlight,
     .autocomplete ul strong.highlight { background-color:  #68e;;
                                         margin:0; padding:0; }

     .autocomplete2{font-size:11px;}

     div.autocomplete {
       position:absolute;
       width:250px;
       border:1px solid #888;
       margin:0;
       padding:0;


       background: #E3E9FF;
       z-index:999999;
     }
     div.autocomplete ul {
       list-style-type:none;
       margin:0;
       padding:0;
     }*/

      /*======enbd autocomplete==*/
    </style>
  </body>
</html>


