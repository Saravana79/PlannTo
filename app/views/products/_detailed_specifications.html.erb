<%# cache ['detailed_specifications', @item] do%>
<div class="specificationcontainer">
  <div class="spacificationdiv">
    <br/>
    <h3 class=""><%= @item.get_name + " - " + "Specifications" %></h3>
    
    <div class="specificationblckdiv">
      <% @item.specification.group_by(&:category_name).each do |category, product_attributes| %>
         <%if item_group_display_required?(product_attributes.collect(&:attribute_id), @item)%>
          <ul class="specificationblckdivul">
            <li class="specificationblckdivtitletxt"><%= category %></li>
            <% reset_cycle("specificationinnerul") %>
            <li class="specificationblckdivli">
              <% product_attributes.each_with_index do |product_attribute| %>
            
                <%if display_specification?(product_attribute)%>
                  <ul class="<%= cycle("specificationinnerul", "specificationinnerul", :name => "specificationinnerul") -%>">
                 
                  <%unless product_attribute.name == "Price" %>
                     <%if (!product_attribute.description.nil? && !product_attribute.attributeshyperlink.nil?) || (!product_attribute.description.blank? && !product_attribute.attributeshyperlink.blank?) %>
                        <li class="specificationblcksublvltxt">
                          <span style="width:200px;float:left;">
                          <strong>
                            <%= product_attribute.name %>
                              <%= link_to "(?)","#",:onclick => "$('#description_#{product_attribute.attribute_id}').bPopup({
   closeClass:'Closebut',
   modalClose: false,
   position: [screen.width / 3, $(window).scrollTop() + 150],
   follow: [false, false] 
 });return false;", :title => "Description" %>
                                 :</strong>
                        </span>
                        <%= render "attribute_description_popup",:attribute => product_attribute %>
                     <%elsif !product_attribute.attributeshyperlink.nil? || !product_attribute.attributeshyperlink.blank? %>
                        <li class="specificationblcksublvltxt"><strong><%= product_attribute.name %>   
                        <% link = product_attribute.attributeshyperlink %>
                        <% if(link).include?("http://") || (link).include?("https://")  %>
                        
                            <%= link_to "(?)",product_attribute.attributeshyperlink,:title => "Description" %> : </strong>
                        <%else%>
                           <%= link_to "(?)","http://" + product_attribute.attributeshyperlink,:title => "Description" %> : </strong>
                         <%end%>
                    <%else%>
                         <li class="specificationblcksublvltxt">
                          <span style="width:200px;float:left;">
                          <strong><%= product_attribute.name %> : </strong></span>
                     <%end%>       
                     <span>
                    <%=raw display_specification_value(product_attribute)%></span><%#= product_attribute.value %> <%#= product_attribute.unit_of_measure %></li>
                  <%end%>  
                  </ul >
                <%end%>
              <% end %>
            </li>
            <!--<li class="specificationblckdivliempty dontfloat"></li>-->
          </ul>
        <%end%>
      <% end %>
    </div>
  </div>
  <div class="dontfloat"></div>
</div>
<%#end%>
